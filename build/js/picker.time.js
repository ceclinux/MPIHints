!function(e){"function"==typeof define&&define.amd?define(["picker","jquery"],e):e(Picker,jQuery)}(function(e,t){function i(e,t){var i=this,r=e.$node.data("value");i.settings=t,i.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"create validate",view:"create validate",disable:"flipItem",enable:"flipItem"},i.item={},i.item.interval=t.interval||30,i.item.disable=(t.disable||[]).slice(0),i.item.enable=-function(e){return e[0]===!0?e.shift():-1}(i.item.disable),i.set("min",t.min).set("max",t.max).set("now").set("select",r||e.$node[0].value||i.item.min,{format:r?t.formatSubmit:t.format}),i.key={40:1,38:-1,39:1,37:-1,go:function(e){i.set("highlight",i.item.highlight.pick+e*i.item.interval,{interval:e*i.item.interval}),this.render()}},e.on("render",function(){var i=e.$root.children(),r=i.find("."+t.klass.viewset);r.length&&(i[0].scrollTop=~~r.position().top-2*r[0].clientHeight)}).on("open",function(){e.$root.find("button").attr("disable",!1)}).on("close",function(){e.$root.find("button").attr("disable",!0)})}var r=24,n=60,a=12,s=r*n;i.prototype.set=function(e,t,i){var r=this;return r.item["enable"==e?"disable":"flip"==e?"enable":e]=r.queue[e].split(" ").map(function(n){return t=r[n](e,t,i)}).pop(),"select"==e?r.set("highlight",r.item.select,i):"highlight"==e?r.set("view",r.item.highlight,i):"interval"==e?r.set("min",r.item.min,i).set("max",r.item.max,i):("flip"==e||"min"==e||"max"==e||"disable"==e||"enable"==e)&&r.item.select&&r.item.highlight&&("min"==e&&r.set("max",r.item.max,i),r.set("select",r.item.select,i).set("highlight",r.item.highlight,i)),r},i.prototype.get=function(e){return this.item[e]},i.prototype.create=function(i,a,o){var l=this;return a=void 0===a?i:a,e._.isDate(a)&&(a=[a.getHours(),a.getMinutes()]),t.isPlainObject(a)&&e._.isInteger(a.pick)?a=a.pick:t.isArray(a)?a=+a[0]*n+ +a[1]:e._.isInteger(a)||(a=l.now(i,a,o)),"max"==i&&a<l.item.min.pick&&(a+=s),"min"!=i&&"max"!=i&&(a-l.item.min.pick)%l.item.interval!==0&&(a+=l.item.interval),a=l.normalize(i,a,o),{hour:~~(r+a/n)%r,mins:(n+a%n)%n,time:(s+a)%s,pick:a}},i.prototype.now=function(t,i){var r=new Date,a=r.getHours()*n+r.getMinutes();return a-=a%this.item.interval,e._.isInteger(i)?i+="min"==t&&0>i&&0===a?2:1:i=1,i*this.item.interval+a},i.prototype.normalize=function(e,t){var i=this.item.interval,r="min"==e?0:(t-this.item.min.pick)%i;return t-(r+(0>t?i:0))},i.prototype.measure=function(i,a,s){var o=this;return a?a===!0||e._.isInteger(a)?a=o.now(i,a,s):t.isPlainObject(a)&&e._.isInteger(a.pick)&&(a=o.normalize(i,a.pick,s)):a="min"==i?[0,0]:[r-1,n-1],a},i.prototype.validate=function(e,t,i){var r=this,n=i&&i.interval?i.interval:r.item.interval;return r.disabled(t)&&(t=r.shift(t,n)),t=r.scope(t),r.disabled(t)&&(t=r.shift(t,-1*n)),t},i.prototype.disabled=function(i){var r=this,n=r.item.disable.filter(function(n){return e._.isInteger(n)?i.hour==n:t.isArray(n)||e._.isDate(n)?i.pick==r.create(n).pick:void 0});return n=n.length&&!n.filter(function(e){return t.isArray(e)&&"inverted"==e[2]}).length,-1===r.item.enable?!n:n||i.pick<r.item.min.pick||i.pick>r.item.max.pick},i.prototype.shift=function(e,t){var i=this,r=i.item.min.pick,n=i.item.max.pick;for(t=t||i.item.interval;i.disabled(e)&&(e=i.create(e.pick+=t),!(e.pick<=r||e.pick>=n)););return e},i.prototype.scope=function(e){var t=this.item.min.pick,i=this.item.max.pick;return this.create(e.pick>i?i:e.pick<t?t:e)},i.prototype.parse=function(i,r,a){var s=this,o={};if(!r||e._.isInteger(r)||t.isArray(r)||e._.isDate(r)||t.isPlainObject(r)&&e._.isInteger(r.pick))return r;if(!a||!a.format)throw"Need a formatting option to parse this..";return s.formats.toArray(a.format).map(function(t){var i=s.formats[t],n=i?e._.trigger(i,s,[r,o]):t.replace(/^!/,"").length;i&&(o[t]=r.substr(0,n)),r=r.substr(n)}),+o.i+n*(+(o.H||o.HH)||+(o.h||o.hh)%12+(/^p/i.test(o.A||o.a)?12:0))},i.prototype.formats={h:function(t,i){return t?e._.digits(t):i.hour%a||a},hh:function(t,i){return t?2:e._.lead(i.hour%a||a)},H:function(t,i){return t?e._.digits(t):""+i.hour%24},HH:function(t,i){return t?e._.digits(t):e._.lead(i.hour%24)},i:function(t,i){return t?2:e._.lead(i.mins)},a:function(e,t){return e?4:s/2>t.time%s?"a.m.":"p.m."},A:function(e,t){return e?2:s/2>t.time%s?"AM":"PM"},toArray:function(e){return e.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(t,i){var r=this;return r.formats.toArray(t).map(function(t){return e._.trigger(r.formats[t],r,[0,i])||t.replace(/^!/,"")}).join("")}},i.prototype.flipItem=function(e,i){var r=this,n=r.item.disable,a=-1===r.item.enable;return"flip"==i?r.item.enable=a?1:-1:"enable"==e&&i===!0||"disable"==e&&i===!1?(r.item.enable=1,n=[]):"enable"==e&&i===!1||"disable"==e&&i===!0?(r.item.enable=-1,n=[]):t.isArray(i)&&(a&&"enable"==e||!a&&"disable"==e?n=r.addDisabled(n,i):a||"enable"!=e?a&&"disable"==e&&(n=r.removeDisabled(n,i)):n=r.addEnabled(n,i)),n},i.prototype.addEnabled=function(i,r){var n=this;return r.map(function(r){n.filterDisabled(i,r,1).length&&(i=n.removeDisabled(i,[r]),t.isArray(r)&&i.filter(function(t){return e._.isInteger(t)&&n.create(r).hour===t}).length&&(r=r.slice(0),r.push("inverted"),i.push(r)))}),i},i.prototype.addDisabled=function(e,i){var r=this;return i.map(function(i){r.filterDisabled(e,i).length?t.isArray(i)&&r.filterDisabled(e,i,1).length&&(e=r.removeDisabled(e,[i])):e.push(i)}),e},i.prototype.removeDisabled=function(e,t){var i=this;return t.map(function(t){e=i.filterDisabled(e,t,1)}),e},i.prototype.filterDisabled=function(e,i,r){var n=t.isArray(i);return e.filter(function(e){var a=!n&&i===e||n&&t.isArray(e)&&i.toString()===e.toString();return r?!a:a})},i.prototype.i=function(t,i){return e._.isInteger(i)&&i>0?i:this.item.interval},i.prototype.nodes=function(t){var i=this,r=i.settings,n=i.item.select,a=i.item.highlight,s=i.item.view,o=i.item.disable;return e._.node("ul",e._.group({min:i.item.min.pick,max:i.item.max.pick,i:i.item.interval,node:"li",item:function(t){return t=i.create(t),[e._.trigger(i.formats.toString,i,[e._.trigger(r.formatLabel,i,[t])||r.format,t]),function(e,l){return n&&n.pick==l&&e.push(r.klass.selected),a&&a.pick==l&&e.push(r.klass.highlighted),s&&s.pick==l&&e.push(r.klass.viewset),o&&i.disabled(t)&&e.push(r.klass.disabled),e.join(" ")}([r.klass.listItem],t.pick),"data-pick="+t.pick]}})+e._.node("li",e._.node("button",r.clear,r.klass.buttonClear,"type=button data-clear=1"+(t?"":" disable"))),r.klass.list)},i.defaults=function(e){return{clear:"Clear",format:"h:i A",interval:30,klass:{picker:e+" "+e+"--time",holder:e+"__holder",list:e+"__list",listItem:e+"__list-item",disabled:e+"__list-item--disabled",selected:e+"__list-item--selected",highlighted:e+"__list-item--highlighted",viewset:e+"__list-item--viewset",now:e+"__list-item--now",buttonClear:e+"__button--clear"}}}(e.klasses().picker),e.extend("pickatime",i)});