!function(e){"function"==typeof define&&define.amd?define(["picker","jquery"],e):e(Picker,jQuery)}(function(e,t){function i(e,t){var i=this,n=e.$node[0].value,a=e.$node.data("value"),r=a||n,o=a?t.formatSubmit:t.format,s=function(){return"rtl"===getComputedStyle(e.$root[0]).direction};i.settings=t,i.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"navigate create validate",view:"create validate viewset",disable:"flipItem",enable:"flipItem"},i.item={},i.item.disable=(t.disable||[]).slice(0),i.item.enable=-function(e){return e[0]===!0?e.shift():-1}(i.item.disable),i.set("min",t.min).set("max",t.max).set("now").set("select",r||i.item.now,{format:o,data:function(e){return r&&(e.indexOf("mm")>-1||e.indexOf("m")>-1)}(i.formats.toArray(o))}),i.key={40:7,38:-7,39:function(){return s()?-1:1},37:function(){return s()?1:-1},go:function(e){i.set("highlight",[i.item.highlight.year,i.item.highlight.month,i.item.highlight.date+e],{interval:e}),this.render()}},e.on("render",function(){e.$root.find("."+t.klass.selectMonth).on("change",function(){e.set("highlight",[e.get("view").year,this.value,e.get("highlight").date]),e.$root.find("."+t.klass.selectMonth).trigger("focus")}),e.$root.find("."+t.klass.selectYear).on("change",function(){e.set("highlight",[this.value,e.get("view").month,e.get("highlight").date]),e.$root.find("."+t.klass.selectYear).trigger("focus")})}).on("open",function(){e.$root.find("button, select").attr("disabled",!1)}).on("close",function(){e.$root.find("button, select").attr("disabled",!0)})}var n=7,a=6;i.prototype.set=function(e,t,i){var n=this;return n.item["enable"==e?"disable":"flip"==e?"enable":e]=n.queue[e].split(" ").map(function(a){return t=n[a](e,t,i)}).pop(),"select"==e?n.set("highlight",n.item.select,i):"highlight"==e?n.set("view",n.item.highlight,i):("flip"==e||"min"==e||"max"==e||"disable"==e||"enable"==e)&&n.item.select&&n.item.highlight&&n.set("select",n.item.select,i).set("highlight",n.item.highlight,i),n},i.prototype.get=function(e){return this.item[e]},i.prototype.create=function(i,n,a){var r,o=this;return n=void 0===n?i:n,n==-1/0||1/0==n?r=n:t.isPlainObject(n)&&e._.isInteger(n.pick)?n=n.obj:t.isArray(n)?(n=new Date(n[0],n[1],n[2]),n=e._.isDate(n)?n:o.create().obj):n=e._.isInteger(n)||e._.isDate(n)?o.normalize(new Date(n),a):o.now(i,n,a),{year:r||n.getFullYear(),month:r||n.getMonth(),date:r||n.getDate(),day:r||n.getDay(),obj:r||n,pick:r||n.getTime()}},i.prototype.now=function(e,t,i){return t=new Date,i&&i.rel&&t.setDate(t.getDate()+i.rel),this.normalize(t,i)},i.prototype.navigate=function(i,n,a){if(t.isPlainObject(n)){for(var r=new Date(n.year,n.month+(a&&a.nav?a.nav:0),1),o=r.getFullYear(),s=r.getMonth(),l=n.date;e._.isDate(r)&&new Date(o,s,l).getMonth()!==s;)l-=1;n=[o,s,l]}return n},i.prototype.normalize=function(e){return e.setHours(0,0,0,0),e},i.prototype.measure=function(t,i){var n=this;return i?e._.isInteger(i)&&(i=n.now(t,i,{rel:i})):i="min"==t?-1/0:1/0,i},i.prototype.viewset=function(e,t){return this.create([t.year,t.month,1])},i.prototype.validate=function(i,n,a){var r,o,s,l,d=this,u=n,c=a&&a.interval?a.interval:1,h=-1===d.item.enable,m=d.item.min,f=d.item.max,y=h&&d.item.disable.filter(function(i){if(t.isArray(i)){var a=d.create(i).pick;a<n.pick?r=!0:a>n.pick&&(o=!0)}return e._.isInteger(i)}).length;if(!a.nav&&(!h&&d.disabled(n)||h&&d.disabled(n)&&(y||r||o)||n.pick<=m.pick||n.pick>=f.pick))for(h&&!y&&(!o&&c>0||!r&&0>c)&&(c*=-1);d.disabled(n)&&(Math.abs(c)>1&&(n.month<u.month||n.month>u.month)&&(n=u,c=Math.abs(c)/c),n.pick<=m.pick?(s=!0,c=1):n.pick>=f.pick&&(l=!0,c=-1),!s||!l);)n=d.create([n.year,n.month,n.date+c]);return n},i.prototype.disabled=function(i){var n=this,a=n.item.disable.filter(function(a){return e._.isInteger(a)?i.day===(n.settings.firstDay?a:a-1)%7:t.isArray(a)||e._.isDate(a)?i.pick===n.create(a).pick:void 0});return a=a.length&&!a.filter(function(e){return t.isArray(e)&&"inverted"==e[3]}).length,-1===n.item.enable?!a:a||i.pick<n.item.min.pick||i.pick>n.item.max.pick},i.prototype.parse=function(i,n,a){var r=this,o={};if(!n||e._.isInteger(n)||t.isArray(n)||e._.isDate(n)||t.isPlainObject(n)&&e._.isInteger(n.pick))return n;if(!a||!a.format)throw"Need a formatting option to parse this..";return r.formats.toArray(a.format).map(function(t){var i=r.formats[t],a=i?e._.trigger(i,r,[n,o]):t.replace(/^!/,"").length;i&&(o[t]=n.substr(0,a)),n=n.substr(a)}),[o.yyyy||o.yy,+(o.mm||o.m)-(a.data?1:0),o.dd||o.d]},i.prototype.formats=function(){function t(e,t,i){var n=e.match(/\w+/)[0];return i.mm||i.m||(i.m=t.indexOf(n)),n.length}function i(e){return e.match(/\w+/)[0].length}return{d:function(t,i){return t?e._.digits(t):i.date},dd:function(t,i){return t?2:e._.lead(i.date)},ddd:function(e,t){return e?i(e):this.settings.weekdaysShort[t.day]},dddd:function(e,t){return e?i(e):this.settings.weekdaysFull[t.day]},m:function(t,i){return t?e._.digits(t):i.month+1},mm:function(t,i){return t?2:e._.lead(i.month+1)},mmm:function(e,i){var n=this.settings.monthsShort;return e?t(e,n,i):n[i.month]},mmmm:function(e,i){var n=this.settings.monthsFull;return e?t(e,n,i):n[i.month]},yy:function(e,t){return e?2:(""+t.year).slice(2)},yyyy:function(e,t){return e?4:t.year},toArray:function(e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(t,i){var n=this;return n.formats.toArray(t).map(function(t){return e._.trigger(n.formats[t],n,[0,i])||t.replace(/^!/,"")}).join("")}}}(),i.prototype.flipItem=function(e,i){var n=this,a=n.item.disable,r=-1===n.item.enable;return"flip"==i?n.item.enable=r?1:-1:"enable"==e&&i===!0||"disable"==e&&i===!1?(n.item.enable=1,a=[]):"enable"==e&&i===!1||"disable"==e&&i===!0?(n.item.enable=-1,a=[]):t.isArray(i)&&(r&&"enable"==e||!r&&"disable"==e?a=n.addDisabled(a,i):r||"enable"!=e?r&&"disable"==e&&(a=n.removeDisabled(a,i)):a=n.addEnabled(a,i)),a},i.prototype.addEnabled=function(i,n){var a=this;return n.map(function(n){a.filterDisabled(i,n,1).length&&(i=a.removeDisabled(i,[n]),t.isArray(n)&&i.filter(function(t){return e._.isInteger(t)&&a.create(n).day===t-1}).length&&(n=n.slice(0),n.push("inverted"),i.push(n)))}),i},i.prototype.addDisabled=function(e,i){var n=this;return i.map(function(i){n.filterDisabled(e,i).length?t.isArray(i)&&n.filterDisabled(e,i,1).length&&(e=n.removeDisabled(e,[i])):e.push(i)}),e},i.prototype.removeDisabled=function(e,t){var i=this;return t.map(function(t){e=i.filterDisabled(e,t,1)}),e},i.prototype.filterDisabled=function(i,n,a){var r=this,o=t.isArray(n)||e._.isDate(n),s=o&&r.create(n).pick;return i.filter(function(i){var l=o&&(t.isArray(i)||e._.isDate(i))?s===r.create(i).pick:n===i;return a?!l:l})},i.prototype.nodes=function(t){var i=this,r=i.settings,o=i.item.now,s=i.item.select,l=i.item.highlight,d=i.item.view,u=i.item.disable,c=i.item.min,h=i.item.max,m=function(t){return r.firstDay&&t.push(t.shift()),e._.node("thead",e._.group({min:0,max:n-1,i:1,node:"th",item:function(e){return[t[e],r.klass.weekdays]}}))}((r.showWeekdaysFull?r.weekdaysFull:r.weekdaysShort).slice(0)),f=function(t){return e._.node("div"," ",r.klass["nav"+(t?"Next":"Prev")]+(t&&d.year>=h.year&&d.month>=h.month||!t&&d.year<=c.year&&d.month<=c.month?" "+r.klass.navDisabled:""),"data-nav="+(t||-1))},y=function(i){return r.selectMonths?e._.node("select",e._.group({min:0,max:11,i:1,node:"option",item:function(e){return[i[e],0,"value="+e+(d.month==e?" selected":"")+(d.year==c.year&&e<c.month||d.year==h.year&&e>h.month?" disabled":"")]}}),r.klass.selectMonth,t?"":"disabled"):e._.node("div",i[d.month],r.klass.month)},p=function(){var i=d.year,n=r.selectYears===!0?5:~~(r.selectYears/2);if(n){var a=c.year,o=h.year,s=i-n,l=i+n;if(a>s&&(l+=a-s,s=a),l>o){var u=s-a,m=l-o;s-=u>m?m:u,l=o}return e._.node("select",e._.group({min:s,max:l,i:1,node:"option",item:function(e){return[e,0,"value="+e+(i==e?" selected":"")]}}),r.klass.selectYear,t?"":"disabled")}return e._.node("div",i,r.klass.year)};return e._.node("div",f()+f(1)+y(r.showMonthsShort?r.monthsShort:r.monthsFull)+p(),r.klass.header)+e._.node("table",m+e._.node("tbody",e._.group({min:0,max:a-1,i:1,node:"tr",item:function(t){var a=r.firstDay&&0===i.create([d.year,d.month,1]).day?-7:0;return[e._.group({min:n*t-d.day+a+1,max:function(){return this.min+n-1},i:1,node:"td",item:function(t){return t=i.create([d.year,d.month,t+(r.firstDay?1:0)]),[e._.node("div",t.date,function(e){return e.push(d.month==t.month?r.klass.infocus:r.klass.outfocus),o.pick==t.pick&&e.push(r.klass.now),s&&s.pick==t.pick&&e.push(r.klass.selected),l&&l.pick==t.pick&&e.push(r.klass.highlighted),(u&&i.disabled(t)||t.pick<c.pick||t.pick>h.pick)&&e.push(r.klass.disabled),e.join(" ")}([r.klass.day]),"data-pick="+t.pick)]}})]}})),r.klass.table)+e._.node("div",e._.node("button",r.today,r.klass.buttonToday,"type=button data-pick="+o.pick+(t?"":" disabled"))+e._.node("button",r.clear,r.klass.buttonClear,"type=button data-clear=1"+(t?"":" disabled")),r.klass.footer)},i.defaults=function(e){return{monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",format:"d mmmm, yyyy",klass:{table:e+"table",header:e+"header",navPrev:e+"nav--prev",navNext:e+"nav--next",navDisabled:e+"nav--disabled",month:e+"month",year:e+"year",selectMonth:e+"select--month",selectYear:e+"select--year",weekdays:e+"weekday",day:e+"day",disabled:e+"day--disabled",selected:e+"day--selected",highlighted:e+"day--highlighted",now:e+"day--today",infocus:e+"day--infocus",outfocus:e+"day--outfocus",footer:e+"footer",buttonClear:e+"button--clear",buttonToday:e+"button--today"}}}(e.klasses().picker+"__"),e.extend("pickadate",i)});